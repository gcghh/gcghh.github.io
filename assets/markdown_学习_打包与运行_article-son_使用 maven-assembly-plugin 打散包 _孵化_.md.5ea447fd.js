import{_ as s,v as n,b as a,R as l}from"./chunks/framework.caa0fbaf.js";const C=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/学习/打包与运行/article-son/使用 maven-assembly-plugin 打散包 [孵化].md","filePath":"markdown/学习/打包与运行/article-son/使用 maven-assembly-plugin 打散包 [孵化].md"}'),p={name:"markdown/学习/打包与运行/article-son/使用 maven-assembly-plugin 打散包 [孵化].md"},o=l(`<p><mark>此方案，为用户（等風來再離開）分享</mark></p><h3 id="_1、程序打包" tabindex="-1">1、程序打包 <a class="header-anchor" href="#_1、程序打包" aria-label="Permalink to &quot;1、程序打包&quot;">​</a></h3><p>在 pom.xml 中配置打包的相关插件</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">&lt;!-- 建议的配置：指定相关编码为 UTF-8 --&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">properties</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">project.build.sourceEncoding</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">UTF-8</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">project.build.sourceEncoding</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">project.reporting.outputEncoding</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">UTF-8</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">project.reporting.outputEncoding</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">maven.compiler.encoding</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">UTF-8</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">maven.compiler.encoding</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">properties</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">finalName</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\${project.artifactId}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">finalName</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">           jar 包中的配置文件优先级高于 config 目录下的 &quot;同名文件&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">           因此，打包时需要排除掉 jar 包中来自 src/main/resources 目录的</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">           配置文件，否则部署时 config 目录中的同名配置文件不会生效</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">plugin</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.apache.maven.plugins</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">maven-jar-plugin</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">3.3.0</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">excludes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">exclude</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">*.*</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">exclude</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">excludes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">plugin</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">plugin</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.apache.maven.plugins</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">maven-assembly-plugin</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">3.3.0</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">executions</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">execution</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">assemble</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">goals</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">goal</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">single</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">goal</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">goals</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">phase</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">package</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">phase</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;">&lt;!-- 打包生成的文件名 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">finalName</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\${project.artifactId}</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">finalName</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;">&lt;!-- jar 等压缩文件在被打包进入 zip、tar.gz 时是否压缩，设置为 false 可加快打包速度 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">recompressZippedFiles</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">false</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">recompressZippedFiles</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;">&lt;!-- 打包生成的文件是否要追加 release.xml 中定义的 id 值 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">appendAssemblyId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">false</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">appendAssemblyId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;">&lt;!-- 指向打包描述文件 package.xml --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">descriptors</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">descriptor</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">package.xml</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">descriptor</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">descriptors</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;">&lt;!-- 打包结果输出的基础目录 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\${project.build.directory}/</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">configuration</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">execution</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">executions</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">plugin</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">plugins</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">build</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>在项目根目录创建 package.xml 文件</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;?</span><span style="color:#F07178;">xml</span><span style="color:#C792EA;"> version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;"> encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">UTF-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">?&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">assembly</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://maven.apache.org/ASSEMBLY/2.0.0</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">		  </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">xsi</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">		  </span><span style="color:#C792EA;">xsi</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">schemaLocation</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://maven.apache.org/ASSEMBLY/2.0.0 http://maven.apache.org/xsd/assembly-2.0.0.xsd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">		assembly 打包配置更多配置可参考官方文档：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">			http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	 --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">release</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">id</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">&lt;!--</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">		设置打包格式，可同时设置多种格式，常用格式有：dir、zip、tar、tar.gz</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">			dir 格式便于在本地测试打包结果</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">			zip 格式便于 windows 系统下解压运行</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">			tar、tar.gz 格式便于 linux 系统下解压运行</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">formats</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">dir</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">zip</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;font-style:italic;">&lt;!-- &lt;format&gt;tar.gz&lt;/format&gt; --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">formats</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">&lt;!-- 打 zip 设置为 true 时，会在 zip 包中生成一个根目录，打 dir 时设置为 false 少层目录 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">includeBaseDirectory</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">true</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">includeBaseDirectory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">fileSets</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;font-style:italic;">&lt;!-- src/main/resources 全部 copy 到 config 目录下 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">fileSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">directory</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\${basedir}/src/main/resources</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">directory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">includes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">*.yml</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">static/**</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">includes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">fileSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;font-style:italic;">&lt;!-- 项目根下面的脚本文件 copy 到根目录下 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">fileSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">directory</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\${basedir}/bin</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">directory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#676E95;font-style:italic;">&lt;!-- 脚本文件在 linux 下的权限设为 755，无需 chmod 可直接运行 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">fileMode</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">755</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">fileMode</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">lineEnding</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">unix</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">lineEnding</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">includes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">*.sh</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">includes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">fileSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">fileSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">directory</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">\${basedir}/bin</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">directory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">fileMode</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">755</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">fileMode</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">lineEnding</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">windows</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">lineEnding</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">includes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">*.bat</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">include</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">includes</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">fileSet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;font-style:italic;">&lt;!-- 项目 lib 目录下的本地 jar 包全部 copy 到 lib 目录下 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#676E95;font-style:italic;">&lt;!-- fileSet&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">			&lt;directory&gt;\${basedir}/lib&lt;/directory&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">			&lt;outputDirectory&gt;lib&lt;/outputDirectory&gt;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">		&lt;/fileSet --&gt;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">fileSets</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">&lt;!-- 依赖的 jar 包 copy 到 lib 目录下 --&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencySets</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependencySet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">			</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">lib</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">outputDirectory</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencySet</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependencySets</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">assembly</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>使用工具，或运行 maven 的 package 指令完成打包（IDEA的右侧边界面，也有这个菜单）</p><h3 id="_2、服务端口控制" tabindex="-1">2、服务端口控制 <a class="header-anchor" href="#_2、服务端口控制" aria-label="Permalink to &quot;2、服务端口控制&quot;">​</a></h3><p>解压打包后的压缩包程序，进入 config 目录编辑 app.yml 配置文件，修改</p><div class="language-yml"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">server.port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8081</span></span></code></pre></div><h3 id="_3、运行-通过终端运行" tabindex="-1">3、运行（通过终端运行） <a class="header-anchor" href="#_3、运行-通过终端运行" aria-label="Permalink to &quot;3、运行（通过终端运行）&quot;">​</a></h3><h4 id="window环境" tabindex="-1">window环境 <a class="header-anchor" href="#window环境" aria-label="Permalink to &quot;window环境&quot;">​</a></h4><p>运行 run.bat 脚本</p><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">title</span><span style="color:#A6ACCD;"> demo</span></span>
<span class="line"><span style="color:#89DDFF;">@echo</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">off</span></span>
<span class="line"><span style="color:#89DDFF;">chcp</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">65001</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> -------------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> 使用说明：</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> 1: 该脚本用于别的项目时只需要修改 MAIN_CLASS 即可运行</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> 2: JAVA_OPTS 可通过 -D 传入 undertow.port 与 undertow.host 这类参数覆盖</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;">    配置文件中的相同值此外还有 undertow.resourcePath, undertow.ioThreads</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;">    undertow.workerThreads 共五个参数可通过 -D 进行传入</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> 3: JAVA_OPTS 可传入标准的 java 命令行参数,例如 -Xms256m -Xmx1024m 这类常用参数</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> -------------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">setlocal </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">pushd</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> 启动入口类,该脚本文件用于别的项目时要改这里</span></span>
<span class="line"><span style="color:#89DDFF;">set</span><span style="color:#A6ACCD;"> MAIN_CLASS</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">org.example.demo.DemoApp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">rem</span><span style="color:#676E95;font-style:italic;"> Java 命令行参数,根据需要开启下面的配置,改成自己需要的,注意等号前后不能有空格</span></span>
<span class="line"><span style="color:#89DDFF;">set</span><span style="color:#A6ACCD;"> JAVA_OPTS</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">-Xms256m -Xmx1024m -Dfile.encoding=UTF-8</span></span>
<span class="line"><span style="color:#89DDFF;">set</span><span style="color:#A6ACCD;"> APP_BASE_PATH</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;">%</span><span style="color:#A6ACCD;font-style:italic;">~dp0</span></span>
<span class="line"><span style="color:#89DDFF;">set</span><span style="color:#A6ACCD;"> CP</span><span style="color:#89DDFF;">=%</span><span style="color:#A6ACCD;">APP_BASE_PATH</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">config;</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">APP_BASE_PATH</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">lib\\*</span></span>
<span class="line"><span style="color:#A6ACCD;">java -Xverify:none </span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">JAVA_OPTS</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;"> -cp </span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">CP</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">MAIN_CLASS</span><span style="color:#89DDFF;">%</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">goto</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">eof</span></span></code></pre></div><h4 id="linux环境" tabindex="-1">linux环境 <a class="header-anchor" href="#linux环境" aria-label="Permalink to &quot;linux环境&quot;">​</a></h4><p>运行 start.sh 脚本</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#!/bin/bash</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ----------------------------------------------------------------------</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 使用说明：</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 1: 该脚本使用前需要首先修改 MAIN_CLASS 值，使其指向实际的启动类</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2：使用命令行 ./start.sh start | stop | restart 可启动/关闭/重启项目</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3: JAVA_OPTS 可传入标准的 java 命令行参数，例如 -Xms256m -Xmx1024m 这类常用参数</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 4: 函数 start() 给出了 4 种启动项目的命令行，根据注释中的提示自行选择合适的方式</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ----------------------------------------------------------------------</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 启动入口类，该脚本文件用于别的项目时要改这里</span></span>
<span class="line"><span style="color:#A6ACCD;">MAIN_CLASS</span><span style="color:#89DDFF;">=</span><span style="color:#C3E88D;">org.example.demo.DemoApp</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$MAIN_CLASS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">com.yourpackage.YourMainClass</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]];</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">请先修改 MAIN_CLASS 的值为你自己项目启动Class，然后再执行此脚本。</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">COMMAND</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;font-style:italic;">$1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$COMMAND</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">start</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$COMMAND</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stop</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$COMMAND</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">restart</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]];</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Usage: </span><span style="color:#A6ACCD;font-style:italic;">$0</span><span style="color:#C3E88D;"> start | stop | restart</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">exit</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Java 命令行参数，根据需要开启下面的配置，改成自己需要的，注意等号前后不能有空格</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># JAVA_OPTS=&quot;-Xms256m -Xmx1024m -Dserver.port=80 &quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># JAVA_OPTS=&quot;-Dserver.port=80 &quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 生成 class path 值</span></span>
<span class="line"><span style="color:#A6ACCD;">APP_BASE_PATH</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">$(</span><span style="color:#82AAFF;">cd</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">dirname</span><span style="color:#C3E88D;"> </span><span style="color:#A6ACCD;font-style:italic;">$0</span><span style="color:#89DDFF;">\`;</span><span style="color:#C3E88D;"> </span><span style="color:#82AAFF;">pwd</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">CP</span><span style="color:#89DDFF;">=\${</span><span style="color:#A6ACCD;">APP_BASE_PATH</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/config:</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">APP_BASE_PATH</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/lib/</span><span style="color:#A6ACCD;">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">start</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 运行为后台进程，并在控制台输出信息</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#java -Xverify:none \${JAVA_OPTS} -cp \${CP} \${MAIN_CLASS} &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 运行为后台进程，并且不在控制台输出信息</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># nohup java -Xverify:none \${JAVA_OPTS} -cp \${CP} \${MAIN_CLASS} &gt;/dev/null 2&gt;&amp;1 &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 运行为后台进程，并且将信息输出到 output.log 文件</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># nohup java -Xverify:none \${JAVA_OPTS} -cp \${CP} \${MAIN_CLASS} &gt; output.log &amp;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 运行为非后台进程，多用于开发阶段，快捷键 ctrl + c 可停止服务</span></span>
<span class="line"><span style="color:#A6ACCD;">     </span><span style="color:#FFCB6B;">java</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-Xverify:none</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">JAVA_OPTS</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-cp</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">CP</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">MAIN_CLASS</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">stop</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 支持集群部署</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">kill</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#FFCB6B;">pgrep</span><span style="color:#C3E88D;"> -f </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">APP_BASE_PATH</span><span style="color:#89DDFF;">}\`</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">2&gt;/dev/null</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># kill 命令不使用 -9 参数时，会回调 onStop() 方法，确定不需要此回调建议使用 -9 参数</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># kill \`pgrep -f \${MAIN_CLASS}\` 2&gt;/dev/null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># 以下代码与上述代码等价</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># kill $(pgrep -f \${MAIN_CLASS}) 2&gt;/dev/null</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$COMMAND</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">start</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]];</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#FFCB6B;">start</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">elif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">$COMMAND</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">stop</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]];</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">then</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">stop</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">stop</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">start</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">fi</span></span></code></pre></div>`,17),t=[o];function e(c,r,D,y,F,i){return n(),a("div",null,t)}const g=s(p,[["render",e]]);export{C as __pageData,g as default};
