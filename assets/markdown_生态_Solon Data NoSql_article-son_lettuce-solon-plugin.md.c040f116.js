import{_ as s,v as n,b as a,R as l}from"./chunks/framework.caa0fbaf.js";const A=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/生态/Solon Data NoSql/article-son/lettuce-solon-plugin.md","filePath":"markdown/生态/Solon Data NoSql/article-son/lettuce-solon-plugin.md"}'),p={name:"markdown/生态/Solon Data NoSql/article-son/lettuce-solon-plugin.md"},o=l(`<p><mark>此插件，由社区成员（Sorghum）贡献</mark></p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.noear</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">lettuce-solon-plugin</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h4 id="_1、描述" tabindex="-1">1、描述 <a class="header-anchor" href="#_1、描述" aria-label="Permalink to &quot;1、描述&quot;">​</a></h4><p>数据扩展插件，基于 lettuce 封装（<a href="https://github.com/lettuce-io/lettuce-core" target="_blank" rel="noreferrer">代码仓库</a>），为 Solon Data 提供了 redis 的操作能力扩展。<mark>（v2.4.2 之后支持）</mark></p><p>//这个插件，主要是为构建客户端提供小便利。其实也可以不用适配，直接使用。</p><h4 id="_2、配置示例" tabindex="-1">2、配置示例 <a class="header-anchor" href="#_2、配置示例" aria-label="Permalink to &quot;2、配置示例&quot;">​</a></h4><p>配置分格有两种：1，将配置内容独立为一个文件；2，将配置做为主配置的内容（注意 &quot;|&quot; 符号）。</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">### 任意选一种</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### 模式一</span></span>
<span class="line"><span style="color:#F07178;">redis.ds2</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># Redis模式 (standalone, cluster, sentinel)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis-mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">standalone</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis-uri</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">redis://localhost:6379/0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#### 模式二</span></span>
<span class="line"><span style="color:#F07178;">lettuce.rd2</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;"># Redis模式 (standalone, cluster, sentinel)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">redis-mode</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">standalone</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">host</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">localhost</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6379</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    socket: xxxx</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    client-name: myClientName</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    database: 0</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    sentinel-masterId: &#39;mymaster&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    username: &#39;myusername&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    password: &#39;mypassword&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    ssl: false</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    verify-mode: FULL</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    startTls: false</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    timeout: 10000</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#    sentinels:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#      - host: localhost</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#        port: 16379</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#        password: &#39;mypassword&#39;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#      - host: localhost</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#        port: 26379</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#        password: &#39;mypassword&#39;</span></span></code></pre></div><h4 id="_3、应用示例" tabindex="-1">3、应用示例 <a class="header-anchor" href="#_3、应用示例" aria-label="Permalink to &quot;3、应用示例&quot;">​</a></h4><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Configuration</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Config</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">value</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redisDs1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">typed</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">true)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RedisClient</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">demo1</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">Inject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${redis.ds1}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">LettuceSupplier</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">supplier</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">RedisClient</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">supplier</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redisDs2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">RedisClient</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">demo2</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">Inject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">\${redis.ds2}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">LettuceSupplier</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">supplier</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">RedisClient</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">supplier</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//集群类的用 RedisClusterClient</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//或者直接用 AbstractRedisClient</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Component</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DemoService</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Inject</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//@Inject(&quot;redisDs1&quot;)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">RedisClient</span><span style="color:#A6ACCD;"> demo1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Inject</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redisDs2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">RedisClient</span><span style="color:#A6ACCD;"> demo2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,10),e=[o];function t(c,r,y,D,i,F){return n(),a("div",null,e)}const d=s(p,[["render",t]]);export{A as __pageData,d as default};
