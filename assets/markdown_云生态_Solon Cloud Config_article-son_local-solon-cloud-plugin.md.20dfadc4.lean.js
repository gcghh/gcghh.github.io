import{_ as s,v as a,b as l,R as o}from"./chunks/framework.caa0fbaf.js";const F=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/云生态/Solon Cloud Config/article-son/local-solon-cloud-plugin.md","filePath":"markdown/云生态/Solon Cloud Config/article-son/local-solon-cloud-plugin.md"}'),n={name:"markdown/云生态/Solon Cloud Config/article-son/local-solon-cloud-plugin.md"},t=o(`<div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">org.noear</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">groupId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">local-solon-cloud-plugin</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">artifactId</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">dependency</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h4 id="_1、描述" tabindex="-1">1、描述 <a class="header-anchor" href="#_1、描述" aria-label="Permalink to &quot;1、描述&quot;">​</a></h4><p>分布式扩展插件。基于 本地 适配的 solon cloud 插件。它比较特别，是分布式能力的本地模拟实现（是个假的分布式插件），且基本实现了 water 所能提供的能力（即覆盖了绝大部分的 solon cloud 能力）。（v1.11.2 之后支持）</p><p>场景定位：</p><ul><li>让所有项目统一使用 solon cloud 接口进行开发</li><li>通过切换配置；就可以在 &quot;本地单体服务&quot; 和 &quot;分布式服务（或微服务）&quot;之间自由切换</li></ul><p>比如：</p><ul><li>定时任务可以在本地调度，配置改动就可以由 water 或 xxl-job 进行调度</li><li>或者配置，自由在本地配置与云端配置之间切换</li></ul><h4 id="_2、能力支持" tabindex="-1">2、能力支持 <a class="header-anchor" href="#_2、能力支持" aria-label="Permalink to &quot;2、能力支持&quot;">​</a></h4><table><thead><tr><th>云端能力接口</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td>CloudConfigService</td><td>云端配置服务</td><td>不支持 namespace；支持 group</td></tr><tr><td>CloudDiscoveryService</td><td>云端注册与发现服务</td><td>不支持 namespace；支持 group</td></tr><tr><td>CloudEventService</td><td>云端事件服务</td><td>不支持 namespace；支持 group</td></tr><tr><td>CloudFileService</td><td>云端文件服务</td><td></td></tr><tr><td>CloudI18nService</td><td>云端国际化服务</td><td></td></tr><tr><td>CloudJobService</td><td>云端定时任务服务</td><td></td></tr><tr><td>CloudListService</td><td>云端名单列表服务</td><td></td></tr><tr><td>CloudMetricService</td><td>云端度量服务</td><td>空实现</td></tr><tr><td>CloudTraceService</td><td>云端链路跟踪服务</td><td>空实现</td></tr></tbody></table><h4 id="_3、配置示例" tabindex="-1">3、配置示例 <a class="header-anchor" href="#_3、配置示例" aria-label="Permalink to &quot;3、配置示例&quot;">​</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">solon.cloud.local</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./solon-cloud/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#必须设置，也可资源目录： classpath:META-INF/solon-cloud/</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">load</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">demoapp.yml</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">#加载配置到应用属性（多个以&quot;,&quot;隔开）</span></span></code></pre></div><p>提醒：通过 &quot;...config.load&quot; 加载的配置，会进入 Solon.cfg() 可使用 @Inject 注入</p><h4 id="_4、演示项目" tabindex="-1">4、演示项目 <a class="header-anchor" href="#_4、演示项目" aria-label="Permalink to &quot;4、演示项目&quot;">​</a></h4><ul><li><a href="https://gitee.com/noear/solon-examples/tree/main/9.Solon-Cloud/demo9010-local" target="_blank" rel="noreferrer">https://gitee.com/noear/solon-examples/tree/main/9.Solon-Cloud/demo9010-local</a></li></ul><h4 id="附录-能力使用说明" tabindex="-1">附录：能力使用说明： <a class="header-anchor" href="#附录-能力使用说明" aria-label="Permalink to &quot;附录：能力使用说明：&quot;">​</a></h4><h5 id="_1-、云端配置服务-本地模拟" tabindex="-1">1)、云端配置服务（本地模拟） <a class="header-anchor" href="#_1-、云端配置服务-本地模拟" aria-label="Permalink to &quot;1)、云端配置服务（本地模拟）&quot;">​</a></h5><p>内容格式支持： yml, properties, json （后缀做为name的一部分，可有可无）<br> 文件地址格式： config/{group}_{name}，例示：</p><ul><li>\${server}/config/demo_demo-db</li><li>\${server}/config/demo_demoapp.yml</li></ul><p><strong>两种应用：</strong></p><p>可以通过配置加载配置</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">solon.cloud.local</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/data/demo/solon-cloud/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#如果不设置，则为 classpath:META-INF/solon-cloud/</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">load</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">demoapp.yml</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>可以通过注解直接注入</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Configuration</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">Config</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">init1</span><span style="color:#89DDFF;">(@</span><span style="color:#C792EA;">CloudConfig</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">demo-db</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Properties</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        System</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">out</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">云端配置服务直接注入的：</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> props</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h5 id="_2-、云端注册与发现服务-本地模拟" tabindex="-1">2)、云端注册与发现服务（本地模拟） <a class="header-anchor" href="#_2-、云端注册与发现服务-本地模拟" aria-label="Permalink to &quot;2)、云端注册与发现服务（本地模拟）&quot;">​</a></h5><p>让服务注册有地方去，也有地方可获取（即发现）</p><h5 id="_3-、云端事件服务-本地模拟" tabindex="-1">3)、云端事件服务（本地模拟） <a class="header-anchor" href="#_3-、云端事件服务-本地模拟" aria-label="Permalink to &quot;3)、云端事件服务（本地模拟）&quot;">​</a></h5><p>本地摸拟实现。不支持持久化，重启就会丢数据。最好还是引入消息队列的适配框架</p><h5 id="_4-、云端文件服务-本地模拟" tabindex="-1">4)、云端文件服务（本地模拟） <a class="header-anchor" href="#_4-、云端文件服务-本地模拟" aria-label="Permalink to &quot;4)、云端文件服务（本地模拟）&quot;">​</a></h5><p>存放在 \${server}/file/ 下</p><h5 id="_5-、云端国际化配置服务-本地模拟" tabindex="-1">5)、云端国际化配置服务（本地模拟） <a class="header-anchor" href="#_5-、云端国际化配置服务-本地模拟" aria-label="Permalink to &quot;5)、云端国际化配置服务（本地模拟）&quot;">​</a></h5><p>内容格式支持： yml, properties, json （不能有手缀名，为了更好的支持中文）<br> 文件地址格式： i18n/{group}_{name}-{locale}，例示：</p><ul><li>\${server}/i18n/demo_demoapp-zh_CN</li><li>\${server}/i18n/demo_demoapp-en_US</li></ul><h5 id="_6-、云端定时任务调度服务-本地模拟" tabindex="-1">6)、云端定时任务调度服务（本地模拟） <a class="header-anchor" href="#_6-、云端定时任务调度服务-本地模拟" aria-label="Permalink to &quot;6)、云端定时任务调度服务（本地模拟）&quot;">​</a></h5><p>时间到就会启动新的执行（不管上次是否执行完成了）</p><h5 id="_7-、云端名单服务-本地模拟" tabindex="-1">7)、云端名单服务（本地模拟） <a class="header-anchor" href="#_7-、云端名单服务-本地模拟" aria-label="Permalink to &quot;7)、云端名单服务（本地模拟）&quot;">​</a></h5><p>内容格式支持： json <br> 文件地址格式： list/{name}-{type}.json，例示：</p><ul><li>\${server}/list/whitelist-ip.json</li></ul><h5 id="_8-、云端度量服务-本地模拟" tabindex="-1">8)、云端度量服务（本地模拟） <a class="header-anchor" href="#_8-、云端度量服务-本地模拟" aria-label="Permalink to &quot;8)、云端度量服务（本地模拟）&quot;">​</a></h5><p>一个空服务。只为已有调用不出错</p><h5 id="_9-、云端跟踪服务-本地模拟" tabindex="-1">9)、云端跟踪服务（本地模拟） <a class="header-anchor" href="#_9-、云端跟踪服务-本地模拟" aria-label="Permalink to &quot;9)、云端跟踪服务（本地模拟）&quot;">​</a></h5><p>一个空服务。只为已有调用不出错</p>`,41),e=[t];function p(r,c,i,d,y,D){return a(),l("div",null,e)}const C=s(n,[["render",p]]);export{F as __pageData,C as default};
